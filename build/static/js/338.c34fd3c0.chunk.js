"use strict";(self.webpackChunkdelivery_app=self.webpackChunkdelivery_app||[]).push([[338],{6338:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(885),a=t(5048),s=t(2791),c=t(4164),l="modal_overlay__pPsai",u="modal_modal__Kap2h",i=t(184),o=document.getElementById("modal-root");var d=function(e){var n=e.close,t=e.children;(0,s.useEffect)((function(){return document.addEventListener("keydown",r),function(){return document.removeEventListener("keydown",r)}}));var r=function(e){"Escape"!==e.code?e.target===e.currentTarget&&n():n()};return(0,c.createPortal)((0,i.jsx)("div",{className:l,onClick:r,children:(0,i.jsx)("div",{className:u,children:t})}),o)},p=t(4942),m=t(1413),h=t(4165),f=t(5861),v=t(5562),x=t(7251),b=t(4569),j=t.n(b)().create({baseURL:"https://62c004aad40d6ec55cc963d5.mockapi.io/api/v1/customers"}),N=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(n){var t,r;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/",n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y={},k=function(){var e=(0,a.v9)(x.X,a.wU),n=(0,s.useState)({name:"",phone:"",email:"",address:""}),t=(0,r.Z)(n,2),c=t[0],l=t[1],u=(0,s.useState)(!1),o=(0,r.Z)(u,2),d=o[0],b=o[1],j=(0,s.useState)(null),k=(0,r.Z)(j,2),C=k[0],Z=k[1],g=(0,s.useCallback)(function(){var e=(0,f.Z)((0,h.Z)().mark((function e(n){var t;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b((function(e){return!0})),Z((function(e){return null})),e.prev=2,e.next=5,N(n);case 5:t=e.sent,b((function(e){return!1})),v.Notify.success("".concat(t.name,", your order was successfully accepted, our manager will contact you ASAP")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),Z((function(n){return e.t0})),v.Notify.error(" order was not accepted, please try again later");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),[]),w=(0,s.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;l((function(e){return(0,m.Z)((0,m.Z)({},e),{},(0,p.Z)({},t,r))}))}),[l]),_=(0,s.useCallback)(function(){var n=(0,f.Z)((0,h.Z)().mark((function n(t){var r;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,g((0,m.Z)((0,m.Z)({},c),{},{products:e}));case 3:return r=n.sent,l({name:"",phone:"",email:"",address:""}),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[g,c,e]),P=c.name,E=c.phone,F=c.email,S=c.address;return(0,i.jsxs)("form",{className:y.form,onSubmit:_,children:[(0,i.jsx)("label",{htmlFor:"name",className:y.label,children:"Name"}),(0,i.jsx)("input",{onChange:w,required:!0,className:y.input,value:P,name:"name",type:"text",id:"name",placeholder:"Name"}),(0,i.jsx)("label",{htmlFor:"email",className:y.label,children:"Email"}),(0,i.jsx)("input",{onChange:w,required:!0,className:y.input,value:F,name:"email",type:"email",id:"email",placeholder:"Email"}),(0,i.jsx)("label",{htmlFor:"phone",className:y.label,children:"Phone"}),(0,i.jsx)("input",{onChange:w,required:!0,className:y.input,value:E,name:"phone",type:"phone",id:"phone",placeholder:"Phone"}),(0,i.jsx)("label",{htmlFor:"address",className:y.label,children:"Address"}),(0,i.jsx)("input",{onChange:w,required:!0,className:y.input,value:S,name:"address",type:"text",id:"address",placeholder:"Address"}),(0,i.jsx)("button",{className:y.button,type:"submit",children:d?"Loading...":"Order"}),C&&(0,i.jsx)("p",{className:y.error,children:C.message})]})},C=t(5636),Z={},g=function(){var e=(0,a.I0)(),n=(0,a.v9)(x.X,a.wU),t=(0,s.useState)({isOpen:!1}),c=(0,r.Z)(t,2),l=c[0],u=c[1],o=(0,s.useCallback)((function(n){return e(C.F2(n))}),[e]),p=(0,s.useCallback)((function(){return e(C.LL())}),[e]),m=(0,s.useCallback)((function(){u({isOpen:!0})}),[u]),h=(0,s.useCallback)((function(){u({isOpen:!1})}),[u]),f=n.map((function(e){var n=e.name,t=e.url,r=e.price,a=(e.text,e.id);return(0,i.jsxs)("li",{className:Z.cartCard,children:[(0,i.jsx)("img",{src:t,alt:"Product ".concat(n),className:Z.cartImg}),(0,i.jsx)("p",{className:Z.title,children:n}),(0,i.jsxs)("p",{className:Z.price,children:["Price: ",r," $"]}),(0,i.jsx)("button",{type:"button",className:Z.deleteBtn,onClick:function(){return o(n)},children:"Delete"})]},a)})),v=n.reduce((function(e,n){return e+n.price}),0).toFixed(2),b=l.isOpen;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:Z.cart,children:f}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:Z.total,children:["Total price ",v," $"]}),(0,i.jsx)("button",{type:"button",className:Z.btn,onClick:m,children:"Create Order"}),(0,i.jsx)("button",{type:"button",className:Z.btn,onClick:p,children:"Clear cart"})]}),b&&(0,i.jsx)(d,{close:h,children:(0,i.jsx)(k,{})})]})},w=t(6119),_=function(){return(0,i.jsx)(w.Z,{children:(0,i.jsx)(g,{})})}},7251:function(e,n,t){t.d(n,{X:function(){return a},a:function(){return r}});var r=function(e){return e.shops.activeId},a=function(e){return e.shops.products}},6119:function(e,n,t){t.d(n,{Z:function(){return l}});var r="container_container__7D7mb",a="container_title__qyPiS",s=t(184);function c(e){var n=e.title,t=e.children;return(0,s.jsxs)("div",{className:r,children:[(0,s.jsx)("h2",{className:a,children:n}),t]})}c.defaultProps={title:""};var l=c}}]);
//# sourceMappingURL=338.c34fd3c0.chunk.js.map